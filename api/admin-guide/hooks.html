<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Creating Hooks | Directus Docs</title>
    <meta name="description" content="The All-New Directus 7. Future-Proof Headless CMS for Managing Custom Database Content.">
    <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" type="image/x-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <meta name="application-name" content="Directus Docs">
  <meta name="theme-color" content="#263238">
  <meta name="apple-mobile-web-app-title" content="Directus Docs">
  <meta name="msapplication-TileColor" content="#263238">
  <meta name="msapplication-config" content="/browserconfig.xml">
    
    <link rel="preload" href="/assets/css/0.styles.c87b3148.css" as="style"><link rel="preload" href="/assets/js/app.f7b58942.js" as="script"><link rel="preload" href="/assets/js/15.d94d1543.js" as="script"><link rel="prefetch" href="/assets/js/37.8a670ac1.js"><link rel="prefetch" href="/assets/js/2.795c8387.js"><link rel="prefetch" href="/assets/js/3.eb23ca15.js"><link rel="prefetch" href="/assets/js/4.7cf900a8.js"><link rel="prefetch" href="/assets/js/5.33e249ab.js"><link rel="prefetch" href="/assets/js/6.123df051.js"><link rel="prefetch" href="/assets/js/7.d3679d35.js"><link rel="prefetch" href="/assets/js/8.672c3908.js"><link rel="prefetch" href="/assets/js/9.1d797863.js"><link rel="prefetch" href="/assets/js/10.017eb489.js"><link rel="prefetch" href="/assets/js/11.3cf98eb2.js"><link rel="prefetch" href="/assets/js/12.1a6b3f49.js"><link rel="prefetch" href="/assets/js/13.ef50d3bb.js"><link rel="prefetch" href="/assets/js/14.6f11710a.js"><link rel="prefetch" href="/assets/js/16.cfaeabd5.js"><link rel="prefetch" href="/assets/js/17.ce7f79b5.js"><link rel="prefetch" href="/assets/js/18.2b4eb530.js"><link rel="prefetch" href="/assets/js/19.7e124595.js"><link rel="prefetch" href="/assets/js/20.4e4fe32a.js"><link rel="prefetch" href="/assets/js/21.e11bdf0e.js"><link rel="prefetch" href="/assets/js/22.d77ecc35.js"><link rel="prefetch" href="/assets/js/23.e978cf8d.js"><link rel="prefetch" href="/assets/js/24.c7b4cbd3.js"><link rel="prefetch" href="/assets/js/25.f8fc48f3.js"><link rel="prefetch" href="/assets/js/26.e527e466.js"><link rel="prefetch" href="/assets/js/27.622c87e7.js"><link rel="prefetch" href="/assets/js/28.887a3654.js"><link rel="prefetch" href="/assets/js/29.cbbefc07.js"><link rel="prefetch" href="/assets/js/30.af4ab2f1.js"><link rel="prefetch" href="/assets/js/31.7a195fde.js"><link rel="prefetch" href="/assets/js/32.d8c71df1.js"><link rel="prefetch" href="/assets/js/33.f5ba3219.js"><link rel="prefetch" href="/assets/js/34.db14dfee.js"><link rel="prefetch" href="/assets/js/35.32defc56.js"><link rel="prefetch" href="/assets/js/36.7346d274.js"><link rel="prefetch" href="/assets/js/38.d25d58df.js"><link rel="prefetch" href="/assets/js/39.a20ca171.js"><link rel="prefetch" href="/assets/js/40.2de9ceea.js"><link rel="prefetch" href="/assets/js/41.01cded44.js"><link rel="prefetch" href="/assets/js/42.221d7b69.js"><link rel="prefetch" href="/assets/js/43.672576b3.js"><link rel="prefetch" href="/assets/js/44.f1d7c8d3.js"><link rel="prefetch" href="/assets/js/45.739f4de8.js"><link rel="prefetch" href="/assets/js/46.60b76c4f.js"><link rel="prefetch" href="/assets/js/47.ee35f304.js"><link rel="prefetch" href="/assets/js/48.9ce60853.js"><link rel="prefetch" href="/assets/js/49.a7f2d72d.js"><link rel="prefetch" href="/assets/js/50.34d1a9f1.js"><link rel="prefetch" href="/assets/js/51.09b292f5.js"><link rel="prefetch" href="/assets/js/52.932a0d8d.js"><link rel="prefetch" href="/assets/js/53.a7c8f547.js"><link rel="prefetch" href="/assets/js/54.37807914.js"><link rel="prefetch" href="/assets/js/55.7e52d835.js"><link rel="prefetch" href="/assets/js/56.6ce5a81a.js"><link rel="prefetch" href="/assets/js/57.b42d7384.js"><link rel="prefetch" href="/assets/js/58.9c56df03.js"><link rel="prefetch" href="/assets/js/59.11ecde35.js"><link rel="prefetch" href="/assets/js/60.499ac7e5.js"><link rel="prefetch" href="/assets/js/61.28562bf2.js"><link rel="prefetch" href="/assets/js/62.2cddc62b.js"><link rel="prefetch" href="/assets/js/63.fd5b648a.js"><link rel="prefetch" href="/assets/js/64.cf8ff197.js"><link rel="prefetch" href="/assets/js/65.198406ef.js"><link rel="prefetch" href="/assets/js/66.b3f97c73.js"><link rel="prefetch" href="/assets/js/67.a926e7f3.js"><link rel="prefetch" href="/assets/js/68.71fc7ab9.js"><link rel="prefetch" href="/assets/js/69.1395509b.js"><link rel="prefetch" href="/assets/js/70.7b4f9482.js"><link rel="prefetch" href="/assets/js/71.6354b0e1.js"><link rel="prefetch" href="/assets/js/72.77d21719.js"><link rel="prefetch" href="/assets/js/73.f167de83.js"><link rel="prefetch" href="/assets/js/74.c4115adf.js"><link rel="prefetch" href="/assets/js/75.cc0cfcc7.js"><link rel="prefetch" href="/assets/js/76.a3cc383d.js"><link rel="prefetch" href="/assets/js/77.a56f794f.js"><link rel="prefetch" href="/assets/js/78.226d9ba5.js"><link rel="prefetch" href="/assets/js/79.2a3c4931.js"><link rel="prefetch" href="/assets/js/80.8dad48fc.js"><link rel="prefetch" href="/assets/js/81.3401c265.js"><link rel="prefetch" href="/assets/js/82.a4d53177.js"><link rel="prefetch" href="/assets/js/83.14b8d6ad.js"><link rel="prefetch" href="/assets/js/84.e2a318fe.js"><link rel="prefetch" href="/assets/js/85.a5066549.js"><link rel="prefetch" href="/assets/js/86.f9888b73.js"><link rel="prefetch" href="/assets/js/87.57faf2a8.js"><link rel="prefetch" href="/assets/js/88.6035808e.js"><link rel="prefetch" href="/assets/js/89.9b4fdf75.js"><link rel="prefetch" href="/assets/js/90.9d317c2b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c87b3148.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Directus Docs</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://directus.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://directus.cloud" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cloud
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://directus.app" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/directus/docs-v7" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://directus.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://directus.cloud" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cloud
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://directus.app" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/directus/docs-v7" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Introduction</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>API Reference</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>API Admin Guide</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/api/admin-guide/install.html" class="sidebar-link">Installing the Directus API</a></li><li><a href="/api/admin-guide/update.html" class="sidebar-link">Updating the API</a></li><li><a href="/api/admin-guide/configure.html" class="sidebar-link">Configuring the API</a></li><li><a href="/api/admin-guide/hooks.html" class="active sidebar-link">Creating Hooks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/admin-guide/hooks.html#create-a-hook" class="sidebar-link">Create a Hook</a></li><li class="sidebar-sub-header"><a href="/api/admin-guide/hooks.html#create-an-action-hook" class="sidebar-link">Create an Action Hook</a></li><li class="sidebar-sub-header"><a href="/api/admin-guide/hooks.html#create-a-filter-hook" class="sidebar-link">Create a Filter Hook</a></li><li class="sidebar-sub-header"><a href="/api/admin-guide/hooks.html#action-hooks-list" class="sidebar-link">Action Hooks list</a></li><li class="sidebar-sub-header"><a href="/api/admin-guide/hooks.html#filter-hooks-list" class="sidebar-link">Filter Hooks list</a></li></ul></li><li><a href="/api/admin-guide/custom-endpoints.html" class="sidebar-link">Creating Custom Endpoints</a></li><li><a href="/api/admin-guide/auth-providers.html" class="sidebar-link">Auth Providers</a></li><li><a href="/api/admin-guide/thumbnailer.html" class="sidebar-link">Thumbnailer</a></li><li><a href="/api/admin-guide/field-types.html" class="sidebar-link">Directus Field Types</a></li><li><a href="/api/admin-guide/permissions.html" class="sidebar-link">Permissions</a></li><li><a href="/api/admin-guide/global-settings.html" class="sidebar-link">Global Settings</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>API Contributor Guide</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>App User Guide</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>App Admin Guide</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>App Contributor Guide</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="creating-hooks"><a href="#creating-hooks" aria-hidden="true" class="header-anchor">#</a> Creating Hooks</h1> <p>Directus provides a list of events hooks that are triggered when an actions occurs. For example: before an item is updated.</p> <p>There are two type of hooks, <code>actions</code> and <code>filters</code>.</p> <ul><li><strong>Actions</strong> execute a piece of code <em>without</em> altering the data being passed through it</li> <li><strong>Filters</strong> are the same as Actions but <em>can</em> change the data passed through it</li></ul> <p>For example: an Action might send an email to a user when an new article is created, on the other hand a Filter might set a UUID for a new article before it's stored in the database.</p> <h2 id="create-a-hook"><a href="#create-a-hook" aria-hidden="true" class="header-anchor">#</a> Create a Hook</h2> <p>To create a hook a <a href="http://php.net/manual/en/language.types.callable.php" target="_blank" rel="noopener noreferrer">callable<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (function, class-method combination, or class that implements that <code>__invoke</code> method) must be added to a hook name.</p> <h3 id="using-a-function"><a href="#using-a-function" aria-hidden="true" class="header-anchor">#</a> Using a function</h3> <div class="language-php extra-class"><pre class="language-php"><code><span class="token punctuation">[</span>
  <span class="token single-quoted-string string">'hooks'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'collection.insert'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$collectionName</span><span class="token punctuation">,</span> <span class="token keyword">array</span> <span class="token variable">$data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// execute any code</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>You can also you any class that implement the <code>__invoke</code> method instead of a function.</p> <h3 id="using-a-class-implementing-invoke"><a href="#using-a-class-implementing-invoke" aria-hidden="true" class="header-anchor">#</a> Using a class implementing <code>__invoke</code></h3> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package"><span class="token punctuation">\</span>App<span class="token punctuation">\</span>Events</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">InsertEvent</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__invoke</span><span class="token punctuation">(</span><span class="token variable">$collectionName</span><span class="token punctuation">,</span> <span class="token keyword">array</span> <span class="token variable">$data</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// execute any code</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><div class="language-php extra-class"><pre class="language-php"><code><span class="token punctuation">[</span>
  <span class="token single-quoted-string string">'hooks'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'collection.insert'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'\App\Events\InsertEvent'</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="using-a-class-implementing-hookinterface"><a href="#using-a-class-implementing-hookinterface" aria-hidden="true" class="header-anchor">#</a> Using a class implementing HookInterface</h3> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token comment">// Improvised namespace, not required</span>
<span class="token keyword">namespace</span> <span class="token package"><span class="token punctuation">\</span>App<span class="token punctuation">\</span>Events</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">InsertEvent</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token punctuation">\</span>Directus<span class="token punctuation">\</span>Hook<span class="token punctuation">\</span>HookInterface</span>
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token variable">$collectionName</span><span class="token punctuation">,</span> <span class="token keyword">array</span> <span class="token variable">$data</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// execute any code</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><div class="language-php extra-class"><pre class="language-php"><code><span class="token punctuation">[</span>
  <span class="token single-quoted-string string">'hooks'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'collection.insert'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'\App\Events\InsertEvent'</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="create-an-action-hook"><a href="#create-an-action-hook" aria-hidden="true" class="header-anchor">#</a> Create an Action Hook</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'hooks'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
  <span class="token single-quoted-string string">'collection.insert.articles'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$collectionName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$content</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'New article was created with the title: '</span> <span class="token punctuation">.</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// pesudo function</span>
    <span class="token function">notify</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'admin@example.com'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'New Article'</span><span class="token punctuation">,</span> <span class="token variable">$content</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="create-a-filter-hook"><a href="#create-a-filter-hook" aria-hidden="true" class="header-anchor">#</a> Create a Filter Hook</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'filters'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
  <span class="token single-quoted-string string">'collection.insert.articles:before'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>\<span class="token package">Directus<span class="token punctuation">\</span>Hook<span class="token punctuation">\</span>Payload</span> <span class="token variable">$payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$payload</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'uuid'</span><span class="token punctuation">,</span> \<span class="token package">Directus<span class="token punctuation">\</span>generate_uuid4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token variable">$payload</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>The filters passes a <code>Payload</code> object as paramter, which contain the data and attribute information related to the filter hook, such as the collection name the item belong to.</p> <h3 id="payload-object"><a href="#payload-object" aria-hidden="true" class="header-anchor">#</a> Payload Object</h3> <p>All filters hook now passes a <code>Payload</code> object as parameter instead of an array to represent the data being filtered. Using the <code>Payload</code> object make easier to pass the data over multiple filters. Each filter function must return the <code>Payload</code> so other filters can interact with the updated data.</p> <h3 id="useful-methods"><a href="#useful-methods" aria-hidden="true" class="header-anchor">#</a> Useful methods</h3> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td><code>getData()</code></td> <td>Get the payload data</td></tr> <tr><td><code>attribute($key)</code></td> <td>Get an attribute key. Ex <code>$payload-&gt;attribute('collection_name')</code></td></tr> <tr><td><code>get($key)</code></td> <td>Get an element by its key</td></tr> <tr><td><code>set($key, $value)</code></td> <td>Set or update new value into the given key</td></tr> <tr><td><code>has($key)</code></td> <td>Check whether or not the payload data has the given key set</td></tr> <tr><td><code>remove($key)</code></td> <td>Remove an element with the given key</td></tr> <tr><td><code>isEmpty()</code></td> <td>Check whether the payload data is empty</td></tr> <tr><td><code>replace($newDataArray)</code></td> <td>Replace the payload data with a new data array</td></tr> <tr><td><code>clear()</code></td> <td>Remove all data from the payload</td></tr></tbody></table> <p><strong>NOTE:</strong> <code>get()</code> and <code>has()</code> method can use dot-notation to access child elements. ex <code>get('data.email')</code>.</p> <p><code>Payload</code> object is <code>Arrayable</code> which means you can interact with the data as an array <code>$payload['data']['email]</code>, but you can't do <code>\Directus\Util\ArrayUtils::get($payload, 'data.email')</code>.</p> <p><strong>IMPORTANT:</strong> All these filters are triggered to Directus system collections as well, so make sure if you don't want to interact with directus collections omit them by checking for them first. All Directus system collections can be accesed from <code>\Directus\Database\Schema\SchemaManager::getSystemCollections()</code>.</p> <div class="language-php extra-class"><pre class="language-php"><code>
<span class="token keyword">use</span> <span class="token package">Directus<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Schema<span class="token punctuation">\</span>SchemaManager</span><span class="token punctuation">;</span>

<span class="token variable">$collectionName</span> <span class="token operator">=</span> <span class="token variable">$payload</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">attribute</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'collection_name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">in_array</span><span class="token punctuation">(</span><span class="token variable">$collectionName</span><span class="token punctuation">,</span> SchemaManager<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getSystemCollections</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$payload</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="action-hooks-list"><a href="#action-hooks-list" aria-hidden="true" class="header-anchor">#</a> Action Hooks list</h2> <p>TODO</p> <h2 id="filter-hooks-list"><a href="#filter-hooks-list" aria-hidden="true" class="header-anchor">#</a> Filter Hooks list</h2> <p>TODO</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/directus/docs-v7/edit/master/api/admin-guide/hooks.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/19/2018, 2:58:37 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/api/admin-guide/configure.html" class="prev">
          Configuring the API
        </a></span> <span class="next"><a href="/api/admin-guide/custom-endpoints.html">
          Creating Custom Endpoints
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/15.d94d1543.js" defer></script><script src="/assets/js/app.f7b58942.js" defer></script>
  </body>
</html>
